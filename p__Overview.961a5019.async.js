(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{f7qo:function(de,P,t){"use strict";t.r(P);var ve=t("14J3"),E=t("BMrR"),L=t("tMyG"),G=t("ZuSL"),je=t("+L6B"),R=t("2/Rp"),J=t("k1fw"),T=t("8ub7"),O=t("q1tI"),m=t.n(O),F,D,W,w;function x(){return x=Object.assign||function(r){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(r[s]=l[s])}return r},x.apply(this,arguments)}function V(r,a){if(r==null)return{};var l=B(r,a),s,i;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);for(i=0;i<n.length;i++)s=n[i],!(a.indexOf(s)>=0)&&(!Object.prototype.propertyIsEnumerable.call(r,s)||(l[s]=r[s]))}return l}function B(r,a){if(r==null)return{};var l={},s=Object.keys(r),i,n;for(n=0;n<s.length;n++)i=s[n],!(a.indexOf(i)>=0)&&(l[i]=r[i]);return l}var K=function(a){var l=a.svgRef,s=a.title,i=V(a,["svgRef","title"]);return m.a.createElement("svg",x({viewBox:"0 0 48 48",width:"48px",height:"48px",ref:l},i),s?m.a.createElement("title",null,s):null,F||(F=m.a.createElement("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"})),D||(D=m.a.createElement("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"})),W||(W=m.a.createElement("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"})),w||(w=m.a.createElement("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})))},U=m.a.forwardRef(function(r,a){return m.a.createElement(K,x({svgRef:a},r))}),he=t.p+"static/google.9a7800d0.svg",e=t("nKUr"),Y=r=>Object(e.jsx)(T.a,Object(J.a)({component:()=>Object(e.jsx)(U,{style:{width:"20px",height:"20px"}})},r)),z=Y,$=t("zsHu"),A=t("Fghh"),b=t("I5X1"),Q=()=>{var r=Object(A.j)(),a=r.formatMessage,l=Object(b.a)("useGoogleAPI"),s=l.auth,i=l.setAuth,n=l.signedIn,j=l.setSignedIn,g=l.setSpreadSheetClient,o=Object(G.b)({discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4"],scopes:["profile","https://www.googleapis.com/auth/spreadsheets.readonly"]});return Object(O.useEffect)(()=>{if(o!=null&&o.auth2){var c=o.auth2.getAuthInstance();c.isSignedIn.listen(j),i(c),j(c.isSignedIn.get())}},[o,j,i]),Object(O.useEffect)(()=>{var c;o!=null&&(c=o.client)!==null&&c!==void 0&&c.sheets&&n&&g(o.client.sheets.spreadsheets)},[o,n,g]),s?n?Object(e.jsx)(R.a,{icon:Object(e.jsx)(z,{}),style:{width:"100%",alignItems:"top",height:"40px"},onClick:()=>s&&s.signOut(),children:"Logout"}):Object(e.jsx)(R.a,{icon:Object(e.jsx)(z,{}),style:{width:"100%",alignItems:"top",height:"40px"},onClick:()=>s&&s.signIn({redirect_uri:window.location.href}).then(c=>{j(c.isSignedIn())}),children:a({id:"google.auth.prompt"})}):Object(e.jsx)($.a,{spin:!0})},ge=t("Mwp2"),p=t("VXEj"),me=t("bP8k"),N=t("gFTJ"),ue=t("fOrg"),X=t("+KLJ"),pe=t("DYRE"),I=t("zeV3"),fe=t("jCWc"),S=t("kPKH"),Oe=t("miYZ"),Z=t("tsqr"),f=t("nhC9"),k=t("9kvl"),y=t("f/wd"),q=t("9og8"),_=t("WmNS"),H=t.n(_),ee=t("PNUv"),te=t("lR9U"),C=t("yj/a"),ae=t("WuYN"),se=t("wd/R"),ne=t.n(se),re=()=>{var r=Object(A.j)(),a=r.formatMessage,l=Object(b.a)("useOverview"),s=l.servantNames,i=l.syncServiceSummery;return Object(e.jsxs)(ee.a,{initialValues:{startDate:ne()()},onFinish:function(){var n=Object(q.a)(H.a.mark(function j(g){return H.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",i(g).then(()=>!0));case 1:case"end":return c.stop()}},j)}));return function(j){return n.apply(this,arguments)}}(),children:[Object(e.jsx)(te.a,{name:"startDate",label:a({id:"service.filter.start-date"})}),Object(e.jsx)(C.a,{name:"servantNames",placeholder:a({id:"servant.name"}),showSearch:!1,width:300,fieldProps:{options:s.map(n=>({value:n,label:n})),allowClear:!0,mode:"multiple",style:{width:"100%"}}}),Object(e.jsx)(C.a,{name:"serviceGroups",placeholder:a({id:"service.group"}),showSearch:!1,width:300,fieldProps:{options:y.b.map(n=>({value:n,label:a({id:"servant.group.".concat(n)})})),allowClear:!0,mode:"multiple",style:{width:"100%"}}}),Object(e.jsx)(ae.a,{name:["serviceGroups"],children:n=>{var j=n.serviceGroups,g=j&&j.length>0?j.map(o=>y.a.filter(c=>c.startsWith(o))).flat():y.a;return Object(e.jsx)(C.a,{name:"servantTitles",placeholder:a({id:"servant.title"}),showSearch:!1,fieldProps:{options:g.map(o=>({value:o,label:a({id:"servant.title.".concat(o)})})),allowClear:!0,mode:"multiple",style:{width:"100%"}}})}})]})},le=()=>{var r=Object(k.g)(),a=r.formatMessage,l=Object(b.a)("useOverview"),s=l.services,i=l.syncServiceSummery,n=Object(b.a)("useGoogleAPI"),j=n.signedIn,g=n.auth,o=g===void 0?"google.auth.loading":"signin.prompt";Object(O.useEffect)(()=>{i().catch(v=>Z.b.error(v))},[i]);var c=v=>v==="jk"?{xl:6,lg:6,md:3,sm:2,xs:2}:{xl:4,lg:4,md:3,sm:2,xs:2},ce=v=>{var d=v.servants.filter(u=>u.title!=="general.prayer.lead"&&u.name!=="\u66AB\u505C").map(u=>u.name),h=d.filter((u,M)=>d.indexOf(u)!=M);return h.map(u=>v.servants.filter(M=>M.name===u))};return j?Object(e.jsx)(f.a,{ghost:!0,title:"\u670D\u4E8B\u8868",gutter:[16,8],direction:"column",loading:!g,children:Object(e.jsxs)(E.a,{gutter:[16,16],children:[Object(e.jsx)(S.a,{span:24,children:Object(e.jsx)(f.a,{title:a({id:"service.filter"}),children:Object(e.jsx)(re,{})},"card-filter")}),s.map(v=>Object(e.jsx)(S.a,{lg:24,md:24,children:Object(e.jsx)(f.a,{title:a({id:"service.name.".concat(v.name)}),subTitle:v.date,gutter:[8,4],bordered:!0,headerBordered:!0,extra:Object(e.jsx)(I.b,{children:v.servants.filter(d=>d.title==="service.special-day").map(d=>Object(e.jsx)(f.a,{ghost:!0,children:Object(e.jsx)(I.b,{children:Object(e.jsx)("span",{children:d.name})})},d.name))}),children:Object(e.jsxs)(I.b,{direction:"vertical",children:[ce(v).map(d=>Object(e.jsx)(X.a,{message:"".concat(d[0].name," ").concat(a({id:"service.error.duplicate"}),": ").concat(d.map(h=>a({id:"servant.title.".concat(h.title)})).join(", ")),type:"error",closable:!0})),y.b.map(d=>v.servants.filter(h=>h.title.startsWith(d)).length>0?Object(e.jsx)(N.b,{size:"small",title:a({id:"servant.group.".concat(d)}),column:c(d),children:v.servants.filter(h=>h.title.startsWith(d)).map(h=>Object(e.jsx)(N.b.Item,{label:a({id:"servant.title.".concat(h.title)}),children:h.name},h.title))},d):"")]})},"card-".concat(v.name))}))]})}):Object(e.jsxs)(S.a,{span:24,children:[Object(e.jsxs)("h4",{style:{textAlign:"center"},children:[" ",a({id:o})," "]}),Object(e.jsx)(f.a,{children:Object(e.jsxs)(p.b,{children:[Object(e.jsx)(p.b.Item,{children:Object(e.jsx)(p.b.Item.Meta,{title:a({id:"app.author.title"}),description:a({id:"app.author.content"})})}),Object(e.jsx)(p.b.Item,{children:Object(e.jsx)(p.b.Item.Meta,{title:a({id:"app.usage.title"}),description:a({id:"app.usage.content"})})}),Object(e.jsx)(p.b.Item,{children:Object(e.jsx)(p.b.Item.Meta,{title:a({id:"app.demo.title"}),description:Object(e.jsx)("a",{href:"https://youtu.be/m1iRx5C76xU",target:"_blank",children:a({id:"app.demo.content"})})})})]})})]})},ie=le,oe=()=>Object(e.jsx)(L.a,{ghost:!0,title:!1,children:Object(e.jsx)(G.a,{clientId:"820909422198-gat7h1vkebn88olkgavio3rr73ohl96p.apps.googleusercontent.com",children:Object(e.jsxs)(E.a,{gutter:[8,16],justify:"space-around",children:[Object(e.jsx)(Q,{}),Object(e.jsx)(ie,{})]},"main")})}),xe=P.default=oe}}]);
